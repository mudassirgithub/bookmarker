{"ast":null,"code":"'use strict';\n\nvar stereotype = require('stereotype');\n\nvar parseQuery = function (query) {\n  var result = {};\n  var splitIndex, key, val, i, len;\n  query = query.split('&');\n  len = query.length;\n\n  for (i = 0; i < len; ++i) {\n    splitIndex = query[i].indexOf('=');\n\n    if (splitIndex !== -1) {\n      key = query[i].substring(0, splitIndex);\n      val = query[i].substring(splitIndex + 1) || true;\n    } else {\n      key = query[i];\n      val = true;\n    }\n\n    if (key) {\n      result[key] = stereotype(val);\n    }\n  }\n\n  return result;\n};\n\nvar unfurl = function (url) {\n  url = url.trim();\n  var query = '';\n  var hash = '';\n  var queryIndex = url.indexOf('?');\n  var hashIndex;\n\n  if (queryIndex !== -1) {\n    query = url.substring(queryIndex + 1);\n    hashIndex = query.indexOf('#');\n\n    if (hashIndex !== -1) {\n      hash = query.substring(hashIndex + 1);\n      query = query.substring(0, hashIndex);\n    }\n  } else {\n    // no query\n    hashIndex = url.indexOf('#');\n\n    if (hashIndex !== -1) {\n      hash = url.substring(hashIndex + 1);\n    }\n  }\n\n  return {\n    query: parseQuery(query),\n    hash: stereotype(hash)\n  };\n};\n\nmodule.exports = exports = unfurl;","map":null,"metadata":{},"sourceType":"script"}